-- 更新 nf_AU0 历史数据（从线上同步）
-- 执行前需要先获取 nf_AU0 的 stock_id: SELECT id FROM stock WHERE symbol = 'nf_AU0';

-- 设置 stock_id 变量（假设已知）
SET @stock_id = (SELECT id FROM stock WHERE symbol = 'nf_AU0');

-- 1. 修正 2026-01-08 的错误数据
UPDATE stockhistory
SET close = 997.94, volume = 193112, adjclose = 999.70
WHERE stock_id = @stock_id AND date = '2026-01-08';

-- 2. 插入缺失的数据（使用 INSERT IGNORE 避免重复）
INSERT IGNORE INTO stockhistory (stock_id, date, close, volume, adjclose) VALUES
(@stock_id, '2026-01-12', 1026.28, 238101, 1016.90),
(@stock_id, '2026-01-10', 1008.54, 129025, 1008.54),
(@stock_id, '2026-01-05', 995.00, 115147, 992.38),
(@stock_id, '2025-12-31', 977.56, 284543, 981.22),
(@stock_id, '2025-12-30', 984.84, 391540, 985.94),
(@stock_id, '2025-12-29', 1007.18, 345222, 1016.46),
(@stock_id, '2025-12-27', 1018.10, 171872, 1018.10),
(@stock_id, '2025-12-26', 1016.30, 224588, 1016.40),
(@stock_id, '2025-12-25', 1008.76, 220136, 1008.76),
(@stock_id, '2025-12-24', 1014.68, 351281, 1012.66),
(@stock_id, '2025-12-23', 1014.24, 276379, 1008.36),
(@stock_id, '2025-12-22', 1000.86, 278783, 987.32),
(@stock_id, '2025-12-19', 979.90, 328878, 980.24),
(@stock_id, '2025-12-18', 980.50, 241109, 979.96),
(@stock_id, '2025-12-17', 979.72, 275889, 977.30),
(@stock_id, '2025-12-16', 971.42, 293902, 975.60),
(@stock_id, '2025-12-15', 983.16, 439719, 977.28),
(@stock_id, '2025-12-12', 970.66, 291736, 964.62),
(@stock_id, '2025-12-11', 957.90, 242710, 957.96),
(@stock_id, '2025-12-10', 956.40, 222609, 955.94),
(@stock_id, '2025-12-09', 951.54, 229564, 953.92),
(@stock_id, '2025-12-08', 958.70, 298231, 960.42),
(@stock_id, '2025-12-05', 961.04, 237697, 957.30),
(@stock_id, '2025-12-04', 953.42, 310489, 957.64),
(@stock_id, '2025-12-03', 956.70, 300096, 956.78),
(@stock_id, '2025-12-02', 958.42, 313720, 962.02),
(@stock_id, '2025-12-01', 963.28, 342979, 958.36),
(@stock_id, '2025-11-28', 953.92, 189713, 950.62),
(@stock_id, '2025-11-27', 947.16, 273359, 946.74),
(@stock_id, '2025-11-26', 946.72, 341225, 945.80),
(@stock_id, '2025-11-25', 946.50, 299689, 941.52),
(@stock_id, '2025-11-24', 930.32, 314958, 932.70),
(@stock_id, '2025-11-21', 926.94, 352583, 935.20),
(@stock_id, '2025-11-20', 935.46, 261738, 940.12),
(@stock_id, '2025-11-19', 940.06, 204359, 933.82),
(@stock_id, '2025-11-18', 921.34, 171891, 928.92),
(@stock_id, '2025-11-17', 932.32, 248663, 933.72),
(@stock_id, '2025-11-14', 956.12, 172436, 962.04),
(@stock_id, '2025-11-13', 963.82, 166257, 958.80),
(@stock_id, '2025-11-12', 945.76, 260377, 946.48),
(@stock_id, '2025-11-11', 948.88, 282172, 944.28),
(@stock_id, '2025-11-10', 935.98, 320659, 924.18),
(@stock_id, '2025-11-07', 921.26, 274034, 917.64),
(@stock_id, '2025-11-06', 917.80, 238433, 914.68),
(@stock_id, '2025-11-05', 912.26, 338102, 910.60),
(@stock_id, '2025-11-04', 915.58, 332993, 919.38),
(@stock_id, '2025-11-03', 922.58, 341261, 920.22),
(@stock_id, '2025-11-01', 921.84, 215168, 921.84),
(@stock_id, '2025-10-31', 921.92, 395964, 918.30),
(@stock_id, '2025-10-30', 912.16, 412100, 910.32),
(@stock_id, '2025-10-29', 910.88, 363239, 904.72),
(@stock_id, '2025-10-28', 901.38, 474483, 915.88),
(@stock_id, '2025-10-27', 934.14, 386272, 940.86),
(@stock_id, '2025-10-25', 941.88, 235196, 941.88),
(@stock_id, '2025-10-24', 938.10, 370888, 945.84),
(@stock_id, '2025-10-23', 942.28, 555735, 934.08),
(@stock_id, '2025-10-22', 952.56, 728934, 949.58),
(@stock_id, '2025-10-21', 994.06, 496438, 991.44),
(@stock_id, '2025-10-20', 970.32, 728228, 974.40),
(@stock_id, '2025-10-17', 999.80, 640614, 986.38),
(@stock_id, '2025-10-16', 966.42, 459193, 963.00),
(@stock_id, '2025-10-15', 960.34, 420246, 948.92),
(@stock_id, '2025-10-14', 938.98, 555171, 940.64),
(@stock_id, '2025-10-13', 927.56, 446705, 914.30),
(@stock_id, '2025-10-10', 901.56, 434564, 909.44),
(@stock_id, '2025-10-09', 915.94, 176016, 912.96),
(@stock_id, '2025-09-30', 874.40, 226548, 872.30);
